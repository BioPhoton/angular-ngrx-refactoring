!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ngrx/store"),require("rxjs/ReplaySubject"),require("rxjs/operator/map"),require("rxjs/operator/merge"),require("rxjs/operator/observeOn"),require("rxjs/operator/scan"),require("rxjs/operator/skip"),require("rxjs/operator/withLatestFrom"),require("rxjs/scheduler/queue"),require("rxjs/Observable"),require("rxjs/observable/empty"),require("rxjs/operator/filter"),require("rxjs/operator/share"),require("rxjs/operator/switchMap"),require("rxjs/operator/takeUntil")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@ngrx/store","rxjs/ReplaySubject","rxjs/operator/map","rxjs/operator/merge","rxjs/operator/observeOn","rxjs/operator/scan","rxjs/operator/skip","rxjs/operator/withLatestFrom","rxjs/scheduler/queue","rxjs/Observable","rxjs/observable/empty","rxjs/operator/filter","rxjs/operator/share","rxjs/operator/switchMap","rxjs/operator/takeUntil"],e):e((t.ngrx=t.ngrx||{},t.ngrx.storeDevtools=t.ngrx.storeDevtools||{}),t.ng.core,t.ngrx.store,t.Rx,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Scheduler,t.Rx,t.Rx.Observable,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype)}(this,function(exports,_angular_core,_ngrx_store,rxjs_ReplaySubject,rxjs_operator_map,rxjs_operator_merge,rxjs_operator_observeOn,rxjs_operator_scan,rxjs_operator_skip,rxjs_operator_withLatestFrom,rxjs_scheduler_queue,rxjs_Observable,rxjs_observable_empty,rxjs_operator_filter,rxjs_operator_share,rxjs_operator_switchMap,rxjs_operator_takeUntil){"use strict";function difference(t,e){return t.filter(function(t){return e.indexOf(t)<0})}function unliftState(t){return t.computedStates[t.currentStateIndex].state}function liftAction(t){return new PerformAction(t)}function applyOperators(t,e){return e.reduce(function(t,e){var r=e[0],o=e.slice(1);return r.apply(t,o)},t)}function computeNextEntry(t,e,r,o){if(o)return{state:r,error:"Interrupted by an error up the chain"};var n,s=r;try{s=t(r,e)}catch(t){n=t.toString(),console.error(t.stack||t)}return{state:s,error:n}}function recomputeStates(t,e,r,o,n,s,i){if(e>=t.length&&t.length===s.length)return t;for(var a=t.slice(0,e),c=e;c<s.length;c++){var p=s[c],u=n[p].action,l=a[c-1],_=l?l.state:o,x=l?l.error:void 0,f=i.indexOf(p)>-1,O=f?l:computeNextEntry(r,u,_,x);a.push(O)}return a}function liftInitialState(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[]}}function liftReducerWith(t,e,r,o){return void 0===o&&(o={}),function(n){return function(s,i){function a(t){for(var e=t,r=_.slice(1,e+1),o=0;o<r.length;o++){if(d[o+1].error){e=o,r=_.slice(1,e+1);break}delete u[r[o]]}x=x.filter(function(t){return-1===r.indexOf(t)}),_=[0].concat(_.slice(e+1)),f=d[e].state,d=d.slice(e),O=O>e?O-e:0}var c=s||e,p=c.monitorState,u=c.actionsById,l=c.nextActionId,_=c.stagedActionIds,x=c.skippedActionIds,f=c.committedState,O=c.currentStateIndex,d=c.computedStates;s||(u=Object.create(u));var T=0;switch(i.type){case RESET:u={0:liftAction(INIT_ACTION)},l=1,_=[0],x=[],f=t,O=0,d=[];break;case COMMIT:u={0:liftAction(INIT_ACTION)},l=1,_=[0],x=[],f=d[O].state,O=0,d=[];break;case ROLLBACK:u={0:liftAction(INIT_ACTION)},l=1,_=[0],x=[],O=0,d=[];break;case TOGGLE_ACTION:var S=i.id,I=x.indexOf(S);x=-1===I?[S].concat(x):x.filter(function(t){return t!==S}),T=_.indexOf(S);break;case SET_ACTIONS_ACTIVE:for(var v=i.start,E=i.end,h=i.active,y=[],m=v;m<E;m++)y.push(m);x=h?difference(x,y):x.concat(y),T=_.indexOf(v);break;case JUMP_TO_STATE:O=i.index,T=1/0;break;case SWEEP:_=difference(_,x),x=[],O=Math.min(O,_.length-1);break;case PERFORM_ACTION:o.maxAge&&_.length===o.maxAge&&a(1),O===_.length-1&&O++;var b=l++;u[b]=i,_=_.concat([b]),T=_.length-1;break;case IMPORT_STATE:A=i.nextLiftedState,p=A.monitorState,u=A.actionsById,l=A.nextActionId,_=A.stagedActionIds,x=A.skippedActionIds,f=A.committedState,O=A.currentStateIndex,d=A.computedStates;break;case _ngrx_store.UPDATE:case _ngrx_store.INIT:T=0,o.maxAge&&_.length>o.maxAge&&(d=recomputeStates(d,T,n,f,u,_,x),a(_.length-o.maxAge),T=1/0);break;default:T=1/0}return d=recomputeStates(d,T,n,f,u,_,x),p=r(p,i),{monitorState:p,actionsById:u,nextActionId:l,stagedActionIds:_,skippedActionIds:x,committedState:f,currentStateIndex:O,computedStates:d};var A}}}function createIsExtensionOrMonitorPresent(t,e){return Boolean(t)||e.monitor!==noMonitor}function createReduxDevtoolsExtension(){return"object"==typeof window&&void 0!==window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:null}function createStateObservable(t){return t.state}function noMonitor(){return null}function createConfig(t){var e={maxAge:!1,monitor:noMonitor},r="function"==typeof t?t():t,o=Object.assign({},e,r);if(o.maxAge&&o.maxAge<2)throw new Error("Devtools 'maxAge' cannot be less than 2, got "+o.maxAge);return o}var __extends=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),PERFORM_ACTION="PERFORM_ACTION",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",IMPORT_STATE="IMPORT_STATE",PerformAction=function(){function t(t,e){if(this.action=t,this.timestamp=e,this.type=PERFORM_ACTION,void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}return t}(),Reset=function(){function t(t){this.timestamp=t,this.type=RESET}return t}(),Rollback=function(){function t(t){this.timestamp=t,this.type=ROLLBACK}return t}(),Commit=function(){function t(t){this.timestamp=t,this.type=COMMIT}return t}(),Sweep=function(){function t(){this.type=SWEEP}return t}(),ToggleAction=function(){function t(t){this.id=t,this.type=TOGGLE_ACTION}return t}(),JumpToState=function(){function t(t){this.index=t,this.type=JUMP_TO_STATE}return t}(),ImportState=function(){function t(t){this.nextLiftedState=t,this.type=IMPORT_STATE}return t}(),ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core.InjectionToken("Redux Devtools Extension"),DevtoolsExtension=function(){function DevtoolsExtension(t){this.instanceId="ngrx-store-"+Date.now(),this.devtoolsExtension=t,this.createActionStreams()}return DevtoolsExtension.prototype.notify=function(t,e){this.devtoolsExtension&&this.devtoolsExtension.send(null,e,{serialize:!1},this.instanceId)},DevtoolsExtension.prototype.createChangesObservable=function(){var t=this;return this.devtoolsExtension?new rxjs_Observable.Observable(function(e){var r=t.devtoolsExtension.connect({instanceId:t.instanceId});return r.subscribe(function(t){return e.next(t)}),r.unsubscribe}):rxjs_observable_empty.empty()},DevtoolsExtension.prototype.createActionStreams=function(){var t=this,e=rxjs_operator_share.share.call(this.createChangesObservable()),r=rxjs_operator_filter.filter.call(e,function(t){return t.type===ExtensionActionTypes.START}),o=rxjs_operator_filter.filter.call(e,function(t){return t.type===ExtensionActionTypes.STOP}),n=applyOperators(e,[[rxjs_operator_filter.filter,function(t){return t.type===ExtensionActionTypes.DISPATCH}],[rxjs_operator_map.map,function(e){return t.unwrapAction(e.payload)}]]),s=applyOperators(e,[[rxjs_operator_filter.filter,function(t){return t.type===ExtensionActionTypes.ACTION}],[rxjs_operator_map.map,function(e){return t.unwrapAction(e.payload)}]]),i=rxjs_operator_takeUntil.takeUntil.call(s,o),a=rxjs_operator_takeUntil.takeUntil.call(n,o);this.actions$=rxjs_operator_switchMap.switchMap.call(r,function(){return i}),this.liftedActions$=rxjs_operator_switchMap.switchMap.call(r,function(){return a})},DevtoolsExtension.prototype.unwrapAction=function(action){return"string"==typeof action?eval("("+action+")"):action},DevtoolsExtension}();DevtoolsExtension.decorators=[{type:_angular_core.Injectable}],DevtoolsExtension.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[REDUX_DEVTOOLS_EXTENSION]}]}]};var INIT_ACTION={type:_ngrx_store.INIT},StoreDevtoolsConfig=function(){function t(){}return t}(),STORE_DEVTOOLS_CONFIG=new _angular_core.InjectionToken("@ngrx/devtools Options"),INITIAL_OPTIONS=new _angular_core.InjectionToken("@ngrx/devtools Initial Config"),DevtoolsDispatcher=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(_ngrx_store.ActionsSubject);DevtoolsDispatcher.decorators=[{type:_angular_core.Injectable}],DevtoolsDispatcher.ctorParameters=function(){return[]};var StoreDevtools=function(){function t(t,e,r,o,n,s,i){var a=liftInitialState(s,i.monitor),c=liftReducerWith(s,a,i.monitor,i.maxAge?{maxAge:i.maxAge}:{}),p=applyOperators(e.asObservable(),[[rxjs_operator_skip.skip,1],[rxjs_operator_merge.merge,o.actions$],[rxjs_operator_map.map,liftAction],[rxjs_operator_merge.merge,t,o.liftedActions$],[rxjs_operator_observeOn.observeOn,rxjs_scheduler_queue.queue]]),u=rxjs_operator_map.map.call(r,c),l=new rxjs_ReplaySubject.ReplaySubject(1),_=applyOperators(p,[[rxjs_operator_withLatestFrom.withLatestFrom,u],[rxjs_operator_scan.scan,function(t,e){var r=t.state,n=e[0],s=e[1],i=s(r,n);return o.notify(n,i),{state:i,action:n}},{state:a,action:null}]]).subscribe(function(t){var e=t.state,r=t.action;if(l.next(e),r.type===PERFORM_ACTION){var o=r.action;n.next(o)}}),x=l.asObservable(),f=rxjs_operator_map.map.call(x,unliftState);this.stateSubscription=_,this.dispatcher=t,this.liftedState=x,this.state=f}return t.prototype.dispatch=function(t){this.dispatcher.next(t)},t.prototype.next=function(t){this.dispatcher.next(t)},t.prototype.error=function(t){},t.prototype.complete=function(){},t.prototype.performAction=function(t){this.dispatch(new PerformAction(t))},t.prototype.reset=function(){this.dispatch(new Reset)},t.prototype.rollback=function(){this.dispatch(new Rollback)},t.prototype.commit=function(){this.dispatch(new Commit)},t.prototype.sweep=function(){this.dispatch(new Sweep)},t.prototype.toggleAction=function(t){this.dispatch(new ToggleAction(t))},t.prototype.jumpToState=function(t){this.dispatch(new JumpToState(t))},t.prototype.importState=function(t){this.dispatch(new ImportState(t))},t}();StoreDevtools.decorators=[{type:_angular_core.Injectable}],StoreDevtools.ctorParameters=function(){return[{type:DevtoolsDispatcher},{type:_ngrx_store.ActionsSubject},{type:_ngrx_store.ReducerObservable},{type:DevtoolsExtension},{type:_ngrx_store.ScannedActionsSubject},{type:void 0,decorators:[{type:_angular_core.Inject,args:[_ngrx_store.INITIAL_STATE]}]},{type:StoreDevtoolsConfig,decorators:[{type:_angular_core.Inject,args:[STORE_DEVTOOLS_CONFIG]}]}]};var IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core.InjectionToken("Is Devtools Extension or Monitor Present"),StoreDevtoolsModule=function(){function t(){}return t.instrument=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:e},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store.StateObservable,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store.ReducerManagerDispatcher,useExisting:DevtoolsDispatcher}]}},t}();StoreDevtoolsModule.decorators=[{type:_angular_core.NgModule,args:[{}]}],StoreDevtoolsModule.ctorParameters=function(){return[]},exports.StoreDevtoolsModule=StoreDevtoolsModule,exports.StoreDevtools=StoreDevtools,exports.StoreDevtoolsConfig=StoreDevtoolsConfig,exports.ɵi=INITIAL_OPTIONS,exports.ɵh=STORE_DEVTOOLS_CONFIG,exports.ɵg=DevtoolsDispatcher,exports.ɵk=DevtoolsExtension,exports.ɵj=REDUX_DEVTOOLS_EXTENSION,exports.ɵa=IS_EXTENSION_OR_MONITOR_PRESENT,exports.ɵf=createConfig,exports.ɵb=createIsExtensionOrMonitorPresent,exports.ɵc=createReduxDevtoolsExtension,exports.ɵd=createStateObservable,exports.ɵe=noMonitor,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=./dist/store-devtools/bundles/store-devtools.umd.min.js.map